## 服务器端工作记录

### 实训题目三服务器端

| 要求                                                | 个人理解                                                     | 限定条件                                                     | 可能需要的技术      |
| --------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------- |
| 接收手机位置信息（GPS或IP地址），返回处理结果至手机 | **要通过GPS或IP地址区分多个用户，分别对他们提供服务**，将他们的计数统计结果发送回客户端。统计数据就是色块上的数字。**用户给我发来一个信息，我根据信息再回发给他一个统计数字**，至于客户端怎么操作这个数字我不管。 | 应用服务器Tomcat                                             | ~~线程~~HttpServlet |
| 点亮预设的可视化方式中与手机所发信息对应的拼图图块  | 预设的可视化方式是色块，每个手机会发来一个信息，服务端接收后会**点亮与手机所发信息对应的色块** 。除了回发统计数字的同时，还**要使多人选择的色块变色**，客户端可以添加一个按钮让用户来选色块，但只能选择一次，之后那个按钮就要变灰，这时服务器根据发送的信息做出回应。默认色块颜色为白色。需要一个使图块变色的方法。 | 一个用户只能发送一次数据；多台手机发送相同位置信息时，对应图块颜色加深并显示数量对应色块没有收到手机数据时为透明色或白色 | 数据库              |
| 拼图要求在限定时间内结束，并给出完成的百分度        | **统计数字不为0的块数除以总块数即可**，打包成函数供服务端调用，参数是色块数和统计数字数组？色块数也可以提前确定。**返回值是百分比**，至于怎么在界面上显示我不管。**需要一个限定时间的函数**，输入参数是定时的时间，返回值是结束游戏的信号。可能要客户端收到这个数字后做出结束游戏的操作。 |                                                              |                     |

## 服务端要创建的类

### 20221.7目录结构

![image-20220107184108167](C:\Users\YaoYang\AppData\Roaming\Typora\typora-user-images\image-20220107184108167.png)



## 工作中遇到的问题

1. 如果JSP页面中连接数据库的操作无法实现，要在当前使用的JDK目录，如

```
JDK\jdk1.8.0_311\jre\lib\ext
```

即外部依赖包，加入对应版本的JDBC才可以实现数据库连接（此时WEB-INF的lib目录下不需要有对应的jdbc包，实测可行）。

2. 如果在设局库中设置了自增ID（即标识规范）<img src="C:\Users\YaoYang\AppData\Roaming\Typora\typora-user-images\image-20220108184805218.png" alt="image-20220108184805218" style="zoom: 33%;" />，如果不进行设置，会发现删除整个表后新填入的数据自动标号不是从一开始，这时有两个解决办法，一是将删除数据库的语句设置成

   ```sql
   turncate table 你的表名
   ```

   这样不但将数据全部删除，而且重新定位自增的字段，第二个方法是使用

   ```sql
   delete from 你的表名
   dbcc checkident(你的表名,reseed,0)
   ```

   都可以实现在删除整个数据库以后编号从谁党的默认值开始重新编号的效果。
